# 애노테이션

## 목표 

- 자바의 애노테이션에 대해 학습하기

## 학습할 것 

 - 애노테이션이란 
 
 - @retention

 - @target

 - @documented

 - 애노테이션 프로세서


### 애노테이션이란?

- 애노테이션 : java5부터 등장한 기능 사전적으로는 주석이고 자바에서 클래스나 메소드 등의 선언시에 @(앳)를 사용하는 것을 말하며   Annotation인터페이스이다.

- 소스코드에 메타코드(추가정보)를 주는것

- 자바컴파일러와 JVM을 위한 메타 데이터로 볼 수 있다.

- 특별한 기능이라고 생각안하고 주석이나 마크라는 뜻으로 이해하면 편하다.

- 런타임중에 알아내야하는 값은 들어 갈 수 없다. 컴파일러 수준에서 해석, 완전히 정적 -> @GetMapping(정적인 자원) 

- 사용 목적: 

    1.컴파일러에게 정보를 알려주거나 : 메소드가 재정의 되었는지 확인
     
    2.컴파일할 때와 설치시의 작업을 지정하거나 : XML설정 파일을 자동 생성하거나 배포를 위한 JAR 압축 파일을 자동 생성 가능
    
    3.실행할 때 별도의 처리가 필요할 때 : 객체가 애플리케이션 내부에서 해야할 역할을 정의(서블릿,컨트롤러)
    
    (자바의 신)

✨✨메타 데이터 : 어떤 목적을 가지고 만들어진 데이터(Constructed data with a purpose)'라고도 정의한다.


### 애노테이션을 정의하는 방법

```java
//@interface 를 사용해서 정의 할 수 있고
public @interface MyInterface{

    

}
//사용할 때는 해당 인터페이스명에 @을 사용하여 애노테이션을 사용할 수 있다.
@MyInterface
public class Test{

}

```
- 애노테이션 필드
 1.요소의 타입은 기본형, String, enum, 애노테이션, Class만 가질 수 있습니다.

 2.()안에 매개변수를 선언할 수 없습니다.

 3.예외를 선언할 수 없습니다.

 4.요소를 타입 매개변수로 정의할 수 없습니다.

 5.배열을 선언할 수 있습니다.  String[] arr();

 6.default값을 지정할 수 있습니다. int number() default 500;
```java
public @interface MyInterface{
    int number() default 500;
    String value();
    String[] arr();
    Operation operation();
    Class cc();
    Target t();
    
}

```
###  @Retention

- 애노테이션을 언제까지 유지 할 것 인가.

```java
    @Retention(RetentionPolicy.RUNTIME) //실행시 애노테이션 정보가 가상 머신에 의해서 참조 가능.
    // 유지정책을 'RUNTIME'으로 하면, 실행 시에 '리플렉션 (reflection)'을 통해 클래스 파일에 저장된 애노테이션의 정보를 읽어서 처리할 수 있다. 
    //✨✨리플랙션 : 런타임에 클래스의 메타 정보를 얻는 기능
    @Retention(RetentionPolicy.CLASS) // 클래스 파일에 있는 애노테이 정보가 컴파일러에 의해서 참조 가능함, 하지만 가상머신에서는 사라짐(default)
    @Retention(RetentionPolicy.SOURCE) // 애노테이션 정보가 컴파일시 사라짐 source로 사용되면 일반 주석처럼 사용된다는 뜻이다.
    public @interface MyInterface{

    }
```

###  @target

- 애노테이션을 어디 위치에 적용할지를 선언할 때 사용한다.
```java
@Target(ElementType.METHOD) // 메소드 선언시
@Target(ElementType.TYPE) // 클래스,인터페이스,enum 선언시
@Target(ElementType.FIELD) // enum 상수를 포함한 필드 값 선언시
@Target(ElementType.CONSTRUCTOR) //생성자 선언시
@Target(ElementType.PACKAGE) //패키지 선언시
@Target(ElementType.PARAMETER) // 매개 변수 선언시
@Target(ElementType.LOCAL_VARIABLE) // 지역 변수 선언시
public @interface MyInterface{

}

@MyInterface // Target을 TYPE으로 선언시
public class Test{

}
```

###  @documented

- 해당 애노테이션에 대한 정보가 Javadocs문서에 포함된다는 것을 선언한다.



### 애노테이션 프로세서

- AnnotationProcessor 어노테이션을 프로세싱하는 기술이라고 한다.

- 대표적으로 롬복이 있다.

```java
@Data
public class Test {
    private int num;
}
```
- 실행후 클래스 파일을 열어 보면 set이나 get메서드를 사용할 수 있는데 
- 런타임시에 생성된것이 아닌 컴파일 이후에 생성이 된것을 알 수 있다.
- AnnotationProcessor 는 컴파일타임에 특정한 어노테이션이 붙어있는 소스코드를 참조할 수 있는 기능




## 참고 링크
[jaden_94]](https://velog.io/@jaden_94/12%EC%A3%BC%EC%B0%A8-%ED%95%AD%ED%95%B4%EC%9D%BC%EC%A7%80-Annotation)    
[프로그래밍프로그래머는아름다워](https://b-programmer.tistory.com/264)
[HongK](https://hongkey90.tistory.com/25)

